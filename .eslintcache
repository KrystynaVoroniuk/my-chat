[{"D:\\project\\chat\\src\\index.js":"1","D:\\project\\chat\\src\\App.js":"2","D:\\project\\chat\\src\\components\\JoinBlock.jsx":"3","D:\\project\\chat\\src\\socket.js":"4","D:\\project\\chat\\src\\reducer.js":"5","D:\\project\\chat\\src\\components\\Chat.jsx":"6"},{"size":219,"mtime":1610641338878,"results":"7","hashOfConfig":"8"},{"size":1586,"mtime":1610641492082,"results":"9","hashOfConfig":"8"},{"size":1363,"mtime":1610641966232,"results":"10","hashOfConfig":"8"},{"size":80,"mtime":1610311945934,"results":"11","hashOfConfig":"8"},{"size":914,"mtime":1610491971156,"results":"12","hashOfConfig":"8"},{"size":1664,"mtime":1610642149229,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"z83511",{"filePath":"17","messages":"18","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"19","usedDeprecatedRules":"16"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"22"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27","usedDeprecatedRules":"16"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"D:\\project\\chat\\src\\index.js",[],["30","31"],"D:\\project\\chat\\src\\App.js",["32"],"import React, { useReducer } from 'react';\nimport axios from 'axios';\nimport socket from './socket';\n\nimport reducer from './reducer';\nimport JoinBlock from './components/JoinBlock';\nimport Chat from './components/Chat';\n\n\nfunction App() {\n  const [state, dispatch] = React.useReducer(reducer, {\n    joined: false,\n    roomId: null,\n    userName: null,\n    users: [],\n    messages: [],\n  });\n\n  //пользователь вошел\n  const onLogin = async(obj) => {\n    dispatch({\n      type: 'JOINED',\n      payload: obj,\n    });\n    //emit отправляет сокет запрос на бэк\n    socket.emit('ROOM:JOIN', obj);\n    const { data } = await axios.get(`/rooms/${obj.roomId}`);\n    dispatch({\n      type: 'SET_DATA',\n      payload: data,\n    });\n  };\n   \n  const setUsers = (users) => {\n    dispatch({\n      type: 'SET_USERS',\n      payload: users,\n    });\n  };\n\n  const addMessage = (message) => {\n    dispatch({\n      type: 'NEW_MESSAGE',\n      payload: message,\n    });\n  };\n\n  React.useEffect(() => {\n    socket.on('ROOM:SET_USERS', setUsers);\n    socket.on('ROOM:NEW_MESSAGE', addMessage);\n  }, []); // получаем актуальные данные от сокета про нового юзера\n\n  window.socket = socket;\n  \n\n  return (\n    <div className=\"wrapper\">\n     {!state.joined ? (\n        <JoinBlock onLogin={onLogin} />\n      ) : (\n        <Chat {...state} onAddMessage={addMessage} />\n      )} \n    \n    </div> \n  );\n   //сокрытие блока регистрации, если пользователь вошел\n}\n\nexport default App;\n","D:\\project\\chat\\src\\components\\JoinBlock.jsx",["33"],"import React, { useState } from 'react'\r\n// import socket from '../socket';\r\nimport axios from 'axios';\r\n\r\n\r\n\r\n\r\nfunction JoinBlock({onLogin}) {\r\n    const [roomId, setRoomId] = React.useState('');\r\n    const [userName, setUserName] = React.useState('');\r\n    const [isLoading, setLoading] = React.useState(false);\r\n\r\n    let onEnter = async() => {\r\n        if (!roomId || !userName) {\r\n            return alert('Неверные данные');\r\n          }\r\n        \r\n        let obj = {\r\n            roomId,\r\n            userName,\r\n\r\n        };\r\n        setLoading(true);\r\n        await axios.post('/rooms', obj);\r\n        onLogin(obj);\r\n    }; //нажатие на кнопку вход, авторизован или нет\r\n    return (\r\n\r\n        <div className=\"join-block\">\r\n            <input \r\n            type=\"text\" \r\n            placeholder=\"ROOM ID\" \r\n            value={roomId} \r\n            onChange={(e) => setRoomId(e.target.value)} />\r\n            <input \r\n            type=\"text\" \r\n            placeholder=\"YOUR NAME\" \r\n            value={userName} \r\n            onChange={(e) => setUserName(e.target.value)} />\r\n            <button disabled ={isLoading} onClick={onEnter} className='btn btn-success'>\r\n                {isLoading ? 'ВХОД...' : 'ВОЙТИ'}\r\n            </button>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default JoinBlock;","D:\\project\\chat\\src\\socket.js",[],"D:\\project\\chat\\src\\reducer.js",["34"],"export default(state, action) =>{\r\n    switch (action.type) {\r\n        case 'JOINED':\r\n            \r\n            return{\r\n                ...state,\r\n                joined: true,\r\n                roomId: action.payload.roomId,\r\n                userName: action.payload.userName,\r\n\r\n            };\r\n            case 'SET_DATA':\r\n                return {\r\n                  ...state,\r\n                  users: action.payload.users,\r\n                  messages: action.payload.messages,\r\n                };\r\n          \r\n              case 'SET_USERS':\r\n                return {\r\n                  ...state,\r\n                  users: action.payload,\r\n                };\r\n          \r\n              case 'NEW_MESSAGE':\r\n                return {\r\n                  ...state,\r\n                  messages: [...state.messages, action.payload],\r\n                };\r\n    \r\n        default:\r\n            return state;\r\n    }\r\n}","D:\\project\\chat\\src\\components\\Chat.jsx",[],{"ruleId":"35","replacedBy":"36"},{"ruleId":"37","replacedBy":"38"},{"ruleId":"39","severity":1,"message":"40","line":1,"column":17,"nodeType":"41","messageId":"42","endLine":1,"endColumn":27},{"ruleId":"39","severity":1,"message":"43","line":1,"column":17,"nodeType":"41","messageId":"42","endLine":1,"endColumn":25},{"ruleId":"44","severity":1,"message":"45","line":1,"column":1,"nodeType":"46","endLine":34,"endColumn":2},"no-native-reassign",["47"],"no-negated-in-lhs",["48"],"no-unused-vars","'useReducer' is defined but never used.","Identifier","unusedVar","'useState' is defined but never used.","import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration","no-global-assign","no-unsafe-negation"]